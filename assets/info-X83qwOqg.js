import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-CloRKGGT.js";import{aV as J,r as x,aa as I,d as E,o as y,c as w,x as C,t as R,K as G,L as Q,s as T,ad as Y,e as X,aW as K}from"./index-DOWG_QFa.js";import{u as Z}from"./index-DAunUY-_.js";import"./spotContext-C9Ho60QO.js";const N=J("spot",()=>{console.log("===useSpotStore===");const e=x("MATIC_ETH"),t=I(()=>e.value.split("_")[1]),n=I(()=>e.value.split("_")[0]),{ws:o,data:s,close:l,status:a}=Z("ws://3.1.101.125/deep/deep",{autoReconnect:!0,heartbeat:!1});return{wsData:s,wsClose:l,wsStatus:a,ws:o,symbolName:e,priceCoin:t,amountCoin:n}}),z=E({__name:"kx-progress-circle",props:{isActive:{type:Boolean},size:{}},setup(e){const t=e,n=Number(t.size.replace("px","")),o={width:t.size,height:t.size,background:`radial-gradient(circle, var(--primary-black-color) 0, var(--primary-black-color) ${n/4}px,
  var(--primary-color) ${n/4}px, var(--primary-color) ${n/2}px`},s={width:t.size,height:t.size,background:`radial-gradient(circle, var(--primary-black-color) 0, var(--primary-black-color) ${n/4}px,
  #F6F6F4 ${n/4}px, #F6F6F4 ${n/2-2}px, transparent ${n/2-2}px, 
  transparent ${n/2}px )`};return(l,a)=>(y(),w("div",{class:"h-full grid place-content-center",style:C({width:l.size})},[l.isActive?(y(),w("div",{key:0,class:"rounded-full",style:o})):(y(),w("div",{key:1,class:"rounded-full",style:s}))],4))}}),ee={class:"h-full w-full relative z-[2]"},be=E({__name:"index",props:{modelValue:{},size:{default:"20px"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,s=I({get:()=>n.modelValue,set:c=>o("update:modelValue",c)}),l=c=>c<=Number(s.value)/25,a=I(()=>({left:`${s.value}%`,transform:`translateX(-${s.value}%)`})),r=x(1),i=()=>{r.value=1.2},d=()=>{r.value=1};return(c,p)=>(y(),w("div",null,[R("div",{style:C({height:c.size,"--progress":a.value.left}),class:"relative after:w-[calc(100%-2px)] after:h-[2px] after:bg-[#F6F6F4] after:absolute after:top-1/2 after:left-0 after:transform after:-translate-y-1/2 before:top-1/2 before:left-0 before:transform before:-translate-y-1/2 before:z-[1] before:h-[2px] before:bg-[var(--primary-color)] before:absolute before:w-[var(--progress)]"},[R("div",ee,[(y(),w(G,null,Q(5,(g,u)=>T(z,{size:c.size,key:g,"is-active":l(u),class:"absolute top-1/2",style:C({left:`${u*25}%`,transform:`translateX(-${u*25}%) translateY(-50%)`})},null,8,["size","is-active","style"])),64)),T(z,{size:c.size,class:"absolute top-0 left-0","is-active":!0,style:C({left:`${s.value}%`,transform:`translateX(-${s.value}%) scale(${r.value})`})},null,8,["size","style"])]),T(q,{onInput:i,onMouseout:d,onMousedown:i,onMouseup:d,onTouchstart:i,onTouchend:d,onTouchcancel:d,modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=g=>s.value=g),type:"range",min:"0",max:"100",class:"absolute w-full h-full left-0 top-0 z-[2] opacity-0 cursor-pointer"},null,8,["modelValue"])],4)]))}});function W(e,t){const n={...e};for(const o in t)typeof e[o]!="object"||e[o]===null||Array.isArray(e[o])?t[o]!==void 0&&(n[o]=t[o]):n[o]=W(e[o],t[o]);return n}const te={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},B=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]');let U=!1;function ne(){return"CL v26.004 (internal id ef42da82 @ 2023-11-17T06:25:31.999Z)"}const oe=class{constructor(e){var t,n;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");!((t=e.overrides)===null||t===void 0)&&t["mainSeriesProperties.priceAxisProperties.lockScale"]&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete e.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=W(te,e),((n=this._options.theme)!==null&&n!==void 0?n:"light").toLowerCase()==="dark"&&this._options.loading_screen===void 0&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(U||(U=!0,console.log("Using CL v26.004 (internal id ef42da82 @ 2023-11-17T06:25:31.999Z)"))),this._create()}setDebugMode(e){this._innerAPI().setDebugMode(e)}onChartReady(e){this._ready?e.call(this):this._readyHandlers.push(e)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(e){this._doWhenInnerApiLoaded(t=>{t.onGrayedObjectClicked(e)})}onShortcut(e,t){this._doWhenInnerWindowLoaded(n=>{n.createShortcutAction(e,t)})}subscribe(e,t){this._doWhenInnerApiLoaded(n=>{n.subscribe(e,t)})}unsubscribe(e,t){this._doWhenInnerApiLoaded(n=>{n.unsubscribe(e,t)})}chart(e){return this._innerAPI().chart(e)}getLanguage(){return this._options.locale}setSymbol(e,t,n){this._innerAPI().changeSymbol(e,t,n)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(e=>{e.closePopupsAndDialogs()})}selectLineTool(e,t){this._innerAPI().selectLineTool(e,t)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(e){this._innerAPI().saveChart(e)}load(e,t){this._innerAPI().loadChart({json:e,extendedData:t})}getSavedCharts(e){this._innerAPI().getSavedCharts(e)}loadChartFromServer(e){this._innerAPI().loadChartFromServer(e)}saveChartToServer(e,t,n){this._innerAPI().saveChartToServer(e,t,n)}removeChartFromServer(e,t){this._innerAPI().removeChartFromServer(e,t)}onContextMenu(e){this._doWhenInnerApiLoaded(t=>{t.onContextMenu(e)})}createButton(e){return this._innerWindow().createButton(e)}createDropdown(e){return this._innerWindow().createDropdown(e)}showNoticeDialog(e){this._doWhenInnerApiLoaded(t=>{t.showNoticeDialog(e)})}showConfirmDialog(e){this._doWhenInnerApiLoaded(t=>{t.showConfirmDialog(e)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(e){return this._innerAPI().getStudyInputs(e)}getStudyStyles(e){return this._innerAPI().getStudyStyles(e)}addCustomCSSFile(e){this._innerWindow().addCustomCSSFile(e)}applyOverrides(e){this._options=W(this._options,{overrides:e}),this._doWhenInnerWindowLoaded(t=>{t.applyOverrides(e)})}applyStudiesOverrides(e){this._doWhenInnerWindowLoaded(t=>{t.applyStudiesOverrides(e)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}activeChartIndex(){return this._innerAPI().activeChartIndex()}setActiveChart(e){return this._innerAPI().setActiveChart(e)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(e){this._innerAPI().setLayout(e)}layoutName(){return this._innerAPI().layoutName()}changeTheme(e,t){return this._innerWindow().changeTheme(e,t)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(e=>{e.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(e){this._innerAPI().drawOnAllCharts(e)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(e){this._innerAPI().setIntervalLinkingEnabled(e)}setDateRangeLinkingEnabled(e){this._innerAPI().setDateRangeLinkingEnabled(e)}setTimeFrame(e){this._innerAPI().setTimeFrame(e)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(e,t){this._innerAPI().setFeatureEnabled(e,t)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(e){return this._innerAPI().takeClientScreenshot(e)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}watermark(){return this._innerAPI().watermark()}customSymbolStatus(){return this._innerWindow().customSymbolStatus()}setCSSCustomProperty(e,t){if(e.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");this._innerWindow().document.body.style.setProperty(e,t)}getCSSCustomPropertyValue(e){if(e.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");const t=this._innerWindow().document.body,n=t.style.getPropertyValue(e);return n||getComputedStyle(t).getPropertyValue(e)}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(e){this._ready?e(this._innerWindow()):this._innerWindowLoaded.then(()=>{e(this._innerWindow())})}_doWhenInnerApiLoaded(e){this._doWhenInnerWindowLoaded(t=>{t.doWhenApiIsReady(()=>e(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",ie&&setTimeout(()=>{this._iFrame.style.height=window.innerHeight+"px"},30))}_create(){var e,t;const n=(t=(e=this._options.enabled_features)===null||e===void 0?void 0:e.includes("iframe_loading_compatibility_mode"))!==null&&t!==void 0&&t,[o,s]=this._render(!n),l=this._options.container,a=typeof l=="string"?document.getElementById(l):l;if(a===null)throw new Error(`There is no such element - #${this._options.container}`);a.innerHTML=o,this._iFrame=a.querySelector(`#${this._id}`);const r=this._iFrame;this._innerWindowLoaded=new Promise(i=>{const d=()=>{r.removeEventListener("load",d,!1),i()};r.addEventListener("load",d,!1)}),n&&(r.contentWindow?(r.contentWindow.document.open(),r.contentWindow.document.write(s),r.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded.then(()=>{try{this._innerWindow().widgetReady(()=>{this._ready=!0;for(const i of this._readyHandlers)try{i.call(this)}catch(d){console.error(d)}this._innerWindow().initializationFinished()})}catch(i){if(i instanceof Error&&/widgetReady is not a function/.test(i.message))throw new Error(`There was an error when loading the library. Usually this error means the library failed to load its static files. Check that the library files are available at ${window.location.host}/${this._options.library_path||""} or correct the library_path option.`)}})}_render(e){const t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,rss_news_title:this._options.rss_news_title,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(t[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){const l=encodeURIComponent(this._options.locale);B.findIndex(a=>a.language===l)>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}const n=function(l,a){var r;const i=new URL(`${l||""}`,location.href).href,d=JSON.parse('["bundles/runtime.22cd9f6fe908159906ae.js","bundles/__LANG__.3732.1bd67796122e14c1a819.js","bundles/3515.2f722d33cebe31a154b1.css","bundles/9401.1a253c12a3b43291d008.js","bundles/library.922da4a8fbaf39eb2333.js"]'),c=encodeURIComponent(a),p=(r=B.find(S=>S.language===c))!==null&&r!==void 0?r:{iso:"en",dir:"ltr"},g=`lang="${p.iso}" dir="${p.dir}"`;return`<!DOCTYPE html><html ${(F={bundles:`
${function(S,H,j){if(S===void 0)return"";const L=[],D=[];for(const b of S)b.endsWith(".js")?L.push(`<script defer crossorigin="anonymous" src="${b.replace("__LANG__",j)}"><\/script>`):b.endsWith(".css")&&D.push(`<link type="text/css" href="${H?b.replace(/\.css$/i,".rtl.css"):b}" rel="stylesheet"/>`);return[...L,...D].join(`
`)}(d,p.dir==="rtl",c)}
`,localeLanguage:c,htmlAttrs:g,libraryPath:i}).htmlAttrs}><head><base href="${F.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${F.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]<\/script><script>(function() {
		window.urlParams = (function () {
			var match,
				pl	 = /\\+/g,  // Regex for replacing addition symbol with a space
				search = /([^&=]+)=?([^&]*)/g,
				decode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },
				query = function() {
					// We don't use hash on the url because: safari 13 throws an error if you attempt this
					// on a blob, and safari 14 will strip hash from blob urls.
					if (frameElement && frameElement.dataset.widgetOptions) {
						return frameElement.dataset.widgetOptions;
					} else {
						throw "Unexpected use of this page";
					}
				}(),
				result = {};

			while (match = search.exec(query)) {
				result[decode(match[1])] = decode(match[2]);
			}

			var additionalSettingsObject = window.parent[result.uid];

			var customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];

			for (var p in additionalSettingsObject) {
				if (customObjectNames.indexOf(p) === -1) {
					result[p] = JSON.stringify(additionalSettingsObject[p]);
				}
			}

			return result;
		})();

		window.locale = urlParams.locale;
		window.language = urlParams.locale; // a very big attention needed here
		window.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;

		window.addCustomCSSFile = function(href) {
			var link = document.createElement('link');
			link.setAttribute('type', 'text/css');
			link.setAttribute('rel', 'stylesheet');
			link.setAttribute('href', href);
			link.setAttribute('cross-origin', 'anonymous');

			window.loadedCustomCss = new Promise((resolve) => {
				link.onload = resolve;
				link.onerror = resolve;
			});
			document.body.appendChild(link);
		};

		window.loadedCustomCss = Promise.resolve();
		if (!!urlParams.customCSS) {
			window.addCustomCSSFile(urlParams.customCSS);
		}

		var loadingScreenParams = {};

		if (typeof urlParams.loading_screen === 'string') {
			try {
				loadingScreenParams = JSON.parse(urlParams.loading_screen);
			} catch(e) {}
		}

		var loadingIndicatorElement = document.getElementById('loading-indicator');

		if (loadingScreenParams.backgroundColor) {
			loadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;
		}

		!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var i,s,o,r,l,c=(void 0===l&&(l=""),i='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),o=function(n,i){var s,o;return s=null==i?document.documentElement:i.nodeType===t.Document?i.documentElement:i,e&&(o=e.get(s)),o||((o=s.ownerDocument.createRange()).selectNodeContents(s),e&&e.set(s,o)),o.createContextualFragment(n)}(i,s),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&e._el.style.setProperty(n,i)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();


		var spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;

		var loadingSpinner = new Spinner('large').setStyle({
			'--tv-spinner-color': spinnerColor,
			zIndex: String(2e9),
		});
		loadingSpinner.getEl().classList.add('spinner');
		loadingSpinner.spin(loadingIndicatorElement);
	})();<\/script></body></html>`;var F}(this._options.library_path||"",this._options.locale);let o=new URL("about:blank");if(e){const l=new Blob([n],{type:"text/html"}),a=URL.createObjectURL(l);o=new URL(a)}const s="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return[`<iframe
		id="${this._id}" name="${this._id}" src="${o.href}" data-widget-options="${s}"
		${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;">
	</iframe>`,n]}};typeof window<"u"&&(window.TradingView=window.TradingView||{},window.TradingView.version=ne);const ie=!(typeof window>"u"||!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS");class se{constructor(t,n){this.heartBeatTimer=null,this.options=n,this.messageMap={},this.connState=0,this.socket=null,this.url=t}doOpen(){if(this.connState)return;this.connState=1,this.afterOpenEmit=[];const t=window.WebSocket||window.MozWebSocket,n=new t(this.url);n.binaryType="arraybuffer",n.onopen=o=>this.onOpen(o),n.onclose=o=>this.onClose(o),n.onmessage=o=>this.onMessage(o.data),n.onerror=o=>this.onError(o),this.socket=n}onOpen(t){this.connState=2,this.heartBeatTimer=setInterval(this.checkHeartbeat.bind(this),2e4),this.onReceiver({Event:"open"})}checkOpen(){return this.connState===2}onClose(){this.connState=0,this.connState&&this.onReceiver({Event:"close"})}send(t){this.socket.send(JSON.stringify(t))}emit(t){return new Promise(n=>{this.socket.send(JSON.stringify(t)),this.on("message",o=>{n(o)})})}onMessage(t){try{const n=JSON.parse(t);this.onReceiver({Event:"message",Data:n})}catch(n){console.error(" >> Data parsing error:",n)}}checkHeartbeat(){const t={cmd:"ping",args:[Date.parse(new Date)]};this.send(t)}onError(t){console.log(t)}onReceiver(t){const n=this.messageMap[t.Event];n&&n(t.Data)}on(t,n){this.messageMap[t]=n}doClose(){this.socket.close()}destroy(){this.heartBeatTimer&&(clearInterval(this.heartBeatTimer),this.heartBeatTimer=null),this.doClose(),this.messageMap={},this.connState=0,this.socket=null}}const v=new Map;let h={},f={value:{}},k={value:"ETH_BTC"};const P={value:1};let _=new se("ws://3.1.101.125/deep/kline");_.on("message",le);function re(e){_.connState!=2?(_.doOpen(),_.on("open",()=>{_.send(e)})):(console.log("objSocket.checkOpen",_.connState),_.send(e))}function ae(e){_.send(e)}function le(e){if(e.type=="one")f.value=e;else if(e.type=="node"){h=e.data;const t=v.get(k.value+"-"+P.value);if(t===void 0)return;const n=t.lastDailyBar,o=de(n.time);let s;h.seq*1e3>=o?s={time:o,open:h.open,high:h.high,low:h.low,close:h.close,volume:h.count}:s={...n,high:Math.max(n.high,h.high),low:Math.min(n.low,h.low),close:h.close,volume:h.count},t.lastDailyBar=s,t.handlers.forEach(l=>l.callback(s))}}function de(e){return P.value=="1D"?e+24*60*60*1e3:e+6e4}function ce(e,t,n,o,s,l){const a=k.value+"-"+t,r={id:o,callback:n};let i=v.get(a);if(i){i.handlers.push(r);return}i={subscriberUID:o,resolution:t,lastDailyBar:l,handlers:[r]},v.set(a,i),_.send({cmd:"sub",coinCode:k.value,interval:t})}function M(e){for(const t of v.keys()){const n=v.get(t),o=n.handlers.findIndex(s=>s.id===e);if(o!==-1&&(n.handlers.splice(o,1),n.handlers.length===0)){v.delete(t);break}}}let A=1;const{symbolName:m}=Y(N());function $(e,t,n,o){if(t!=A){A=t,P.value=t,M(m.value+"-"+P.value),f.value.data=null;let r={cmd:"req",timeout:1440,coinCode:m.value,interval:t};ae(r)}const{from:s,to:l,firstDataRequest:a}=n;if(!f.value.data)setTimeout(()=>{$(e,t,n,o)},1e3);else if(f.value.data.length){let r=[];r.length==0&&(f.value.data.forEach(i=>{i.seq=i.id*1e3,i.seq>=s*1e3&&i.seq<l*1e3&&(r=[...r,{time:i.seq,low:i.low,high:i.high,open:i.open,close:i.close,volume:i.count}])}),a&&V.set(A,{...r[r.length-1]}),o(r))}}const V=new Map,O={supports_search:!1,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","1D","2D","3D","1W","1M"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!0};async function he(){console.log("getAllSymbols",m.value)}const ue={onReady:e=>{setTimeout(()=>e(O)),k.value=m.value,f.value={},re({cmd:"req",timeout:1440,coinCode:m.value,interval:A})},searchSymbols:async(e,t,n,o)=>{const l=(await he()).filter(a=>{const r=t===""||a.exchange===t,i=a.full_name.toLowerCase().indexOf(e.toLowerCase())!==-1;return r&&i});o(l)},resolveSymbol:async(e,t,n,o)=>{const s={ticker:m.value+"-1",name:m.value,description:m.value,type:"stock",session:"24x7",timezone:"Asia/Shanghai",minmov:1,pricescale:1e8,has_intraday:!0,has_weekly_and_monthly:!0,supported_resolutions:O.supported_resolutions,volume_precision:2,data_status:"streaming"};t(s)},getBars:async(e,t,n,o,s)=>{$(e,t,n,a=>{a&&a.length?o(a,{noData:!0}):o([],{noData:!0})})},subscribeBars:(e,t,n,o,s)=>{ce(e,t,n,o,s,V.get(A))},unsubscribeBars:e=>{M(e)}},_e="public_user_id",pe="tradingview.com",me="/charting_library/",ge="1",Ae=E({__name:"index",setup(e){const t=N(),n=x();let o=null;const s=[{slug:"Time",resolution:"1",chartType:3},{slug:"1m",resolution:"1",chartType:1},{slug:"15m",resolution:"5",chartType:1},{slug:"1H",resolution:"15",chartType:1},{slug:"4H",resolution:"30",chartType:1},{slug:"1D",resolution:"60",chartType:1},{slug:"1W",resolution:"240",chartType:1}];return X(()=>{if(!n.value)return;const{width:l,height:a}=n.value.getBoundingClientRect(),r={symbol:t.symbolName,datafeed:ue,timezone:"Asia/Shanghai",interval:ge,container:n.value,library_path:me,client_id:pe,user_id:_e,width:l,height:a,theme:"dark",locale:"en",autosize:!0,loading_screen:{backgroundColor:"#191919",foregroundColor:"#191919"},enabled_features:["header_settings","dont_show_boolean_study_arguments","hide_last_na_study_output","move_logo_to_main_pane","legend_context_menu","side_toolbar_in_fullscreen_mode"],disabled_features:["show_zoom_and_move_buttons_on_touch","header_indicators","left_toolbar","header_compare","go_to_date","header_chart_type","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","timeframes_toolbar"]};o=new oe(r),o.onChartReady(()=>{const i=o.chart();o==null||o.headerReady().then(()=>{console.log("Header is ready!"),s.forEach(({slug:c,resolution:p,chartType:g})=>{const u=o.createButton();u.setAttribute("title",c),u.style.cursor="pointer",u.innerHTML=c,u.addEventListener("click",()=>{i.setResolution(p,()=>{i.setChartType(g)})})});const d=o.createButton();d.setAttribute("title","indicators"),d.innerHTML="indicators",d.addEventListener("click",()=>{i.executeActionById("insertIndicator")})}),i.createStudy("Volume",!1,!1)})}),K(()=>{o!==null&&(o.remove(),o=null)}),(l,a)=>(y(),w("div",{ref_key:"chartContainer",ref:n,class:"size-full"},null,512))}}),Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAACFklEQVR4nO2dQU4dMRBE/4ocBnLUIIKScBnCJYCDBLtrlcjI+iyyQUKyZqr4/z2p911drvasxocDAAAAAAAAAADAB2mtfZX6d6k/VbUu9XHKVUeNT1K/aa1d2Q7KGOOL1H9VtX/uochnxtT+c4xxsfvwq/qDewAKqar+e1cTpHbnFq28+rHbzj/ntaN3qqr9ba1dbm7A24VrF6zMut7cgKr+HCB0hNbjHga0AKEjsar6y+YGuEUqvDBAGGA/hSIB/kGIFeQfhgzFHSAMsJ9CkQD/IMQK8uxYYYD3khMGYMCmpJ8whfeHAcIAErBCesQV3t8y6QIV3t+nN0DhhQHCAPspFAnwD0KsIP8wZCjuAGGA/RSKBPgHIVaQZ8cKA7yXnDAAAzYl/YQpvD8MEAaQgBXSI67w/pZJF6jw/jBAGEACVkiPuML7WyZdoML7wwBhAAlYIT3iCu9vmXSBCu8PA4QBJGCF9IgrvL9l0gUqvD8MEAaQgBXSI67w/pZJF6jw/j69AQovDBAG2E+hSIB/EGIF+YchQ3EHCAPsp1AkwD8IneoK4set/d3hV/U/exjAr4tl/HXxfDnCHXOFVlX/trkB89mO+at2t1id6+/rJ/PZDrdg5dXtYS/mcx3z2Y4A0SOhqvq94x2Zi/lsxzmvozpqv919+P8z9958OWJ+AZzDJ2odNT5OzbvtfAAAAAAAAAAAOJwCr4ww9ZOG9v8dAAAAAElFTkSuQmCC";export{Ae as _,be as a,Se as i,N as u};
