import{d as J,r as y,e as X,w as D,f as T,g as n,N as d,i as r,j as E,p as w,k as V,l as m,m as S,o as B,n as O,q as c,c as Y,s as i,t,u as Q,v as o,x as M,y as b,z,A as I,B as N,C as H,D as C,E as ee,F as ae,G as $,H as te,I as le,J as se}from"./index-DOWG_QFa.js";import{E as ne}from"./el-overlay-yY4EJd2E.js";import{c as oe}from"./index-DAunUY-_.js";import{_ as ie,a as G,b as ce}from"./kx-tabs-tab.vue_vue_type_script_setup_true_lang-BYvJbcWX.js";import{_ as re,a as W}from"./kx-tabs-panel.vue_vue_type_script_setup_true_lang-CBa6ghOK.js";import{u as de,_ as ue,a as j,b as pe}from"./useExchangeDialog-D3zyibQV.js";const ge=t("path",{d:"M27 9L9 27M9 9L27 27",stroke:"#F6F6F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),me=[ge],fe={class:"w-full py-[18px] flex gap-2.5 items-center justify-center rounded-[100px] bg-[var(--primary-color)] whitespace-nowrap"},ve=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("g",{"clip-path":"url(#clip0_3647_12988)"},[t("path",{d:"M12 4L10.59 5.41L16.17 11H4V13H16.17L10.59 18.59L12 20L20 12L12 4Z",fill:"#191919"})]),t("defs",null,[t("clipPath",{id:"clip0_3647_12988"},[t("rect",{width:"24",height:"24",fill:"white"})])])],-1),_e={class:"text-sm text-[var(--primary-black-color)] font-Transducer-medium"},he={class:"relative col-span-2 p-5 space-y-[14px] bg-[#50596821] rounded-[20px]"},xe=t("div",{class:"text-[20px] text-white leading-none"}," Start Trading ",-1),we=t("div",{class:"text-[18px] text-[#B9BDC3] font-Pragmatica"}," Allocate your funds for trading to begin the KYEX experience. ",-1),be={class:"flex items-center justify-between p-5 rounded-[10px] bg-[#50596854] font-Pragmatica"},ye=t("span",{class:"text-[#B9BDC3]"},"Asset",-1),Te={class:"flex items-center justify-between p-5 rounded-[10px] bg-[#50596854] font-Pragmatica"},Be=t("span",{class:"text-[#B9BDC3]"},"balance",-1),Ce={class:"text-white"},ke={class:"col-span-2 px-5 py-[17.5px] border border-[#505968] rounded-lg leading-none"},Le={class:"col-span-2 px-[120px]"},Ae={class:"relative col-span-2 p-5 space-y-[14px] bg-[#50596821] rounded-[20px]"},De=t("div",{class:"text-[20px] text-white leading-none"}," Settle Balance ",-1),Ee=t("div",{class:"text-[18px] text-[#B9BDC3] font-Pragmatica"}," Collate trading balance to send back to your funding origins. ",-1),Ve={class:"flex items-center justify-between p-5 rounded-[10px] bg-[#50596854] font-Pragmatica"},Se=t("span",{class:"text-[#B9BDC3]"},"Asset",-1),Oe={class:"flex items-center justify-between p-5 rounded-[10px] bg-[#50596854] font-Pragmatica"},Me=t("span",{class:"text-[#B9BDC3]"},"balance",-1),ze={class:"text-white"},Ie={class:"col-span-2 px-5 py-[17.5px] border border-[#505968] rounded-lg leading-none"},Ne={class:"col-span-2 px-[120px]"},Pe=J({__name:"exchange-dialog-pc",props:{visible:{type:Boolean,default:!1},fundingOrSettlement:{default:"funding"}},setup(F){const k=F,{cwdBalance:u,cwdChainId:P,cwdAddress:Z,erc20s:L,btcWalletAddress:x,selectedCoin:a,sendAmount:f,withdrawAmount:p}=de(),h=y(k.visible),U=async()=>{if(f.value<=0){w("should > 0");return}try{if(n().startLoading(),C[a.value.name].onChainId<0)try{await ee(f.value)}catch{w("btc fund error"),n().stopLoading()}else P!=C[a.value.name].onChainId&&await T(C[a.value.name].onChainId),await ae(a.value.value,f.value,u.value,Z.value),m("交易创建成功！请在钱包内检查"),setTimeout(async()=>{await n().refreshZrc20sOnTx(),n().stopLoading(),h.value=!1},300)}catch(e){console.log(e),m("切换链失败，请重试！操作需要切换对应的链来执行充值"),n().stopLoading()}},R=async()=>{if(p.value<=0){w("should > 0");return}try{n().startLoading(),r().cwdChainId!=7001?(m("切换至zeta链以完成提币"),T(7001).then(async()=>{await $(a.value.value,p.value)})):(console.log("我要转：",p.value,a),await $(a.value.value,p.value)),await te(200),setTimeout(async()=>{await n().refreshZrc20sOnTx(),await n().refreshErc20s(),n().stopLoading(),h.value=!1},300)}catch(e){console.log(e),n().stopLoading()}},v=y(k.fundingOrSettlement);X(()=>{u.value=L.value[5]});const g=y(0),_=async e=>{try{await le(e),u.value=L.value[String(e)]}catch(l){console.log(l)}};D(v,async()=>{if(v.value!="funding")try{await T(7001),await n().refreshZrc20s();let e;n().startLoading(),a.value.name==="ETH"?e=d[1].mainToken:a.value.name==="GETH"?e=d[5].mainToken:a.value.name==="TBNB"?e=d[97].mainToken:a.value.name==="DOGE"?e=d[2e3].mainToken:a.value.name==="MATIC"?e=d[80001].mainToken:(a.value.name,e=void 0),console.log("tokenis",e),e?(console.log(r().zrc20s),await E(e),console.log(r().zrc20s),g.value=r().zrc20s[e.toLowerCase()],console.log(g.value)):g.value=0,n().stopLoading()}catch{v.value="funding",w("需要切换到zetachain以获取资产进行提款"),n().stopLoading()}}),D(a,async()=>{if(v.value==="funding"){if(n().startLoading(),a.value.name==="ETH")await _(5);else if(a.value.name==="GETH")await _(5);else if(a.value.name==="TBNB")await _(97);else if(a.value.name==="DOGE")await _(2e3);else if(a.value.name==="MATIC")await _(80001);else if(a.value.name==="AZETA")await _(7001);else if(a.value.name==="BTC")try{const e=await V();m("获得btc账户："+e[0]),x.value=[],x.value.push(e[0]),console.log("starting get balance..."),await S(),m("btc balance="+r().btcWalletAsset),console.log("finishing get balance..."),u.value=r().btcWalletAsset}catch{console.log(500,500,500,500)}else u.value=0;n().stopLoading()}else{let e;if(n().startLoading(),a.value.name==="ETH")e=d[1].mainToken;else if(a.value.name==="GETH")e=d[5].mainToken;else if(a.value.name==="TBNB")e=d[97].mainToken;else if(a.value.name==="DOGE")e=d[2e3].mainToken;else if(a.value.name==="MATIC")e=d[80001].mainToken;else if(a.value.name==="BTC"){try{const l=await V();m("获得btc账户："+l[0]),x.value=[],x.value.push(l[0]),console.log("starting get balance..."),await S(),m("btc balance="+r().btcWalletAsset),console.log("finishing get balance..."),u.value=r().btcWalletAsset}catch{console.log(500,500,500,500)}e=se.mainToken}else e=void 0;console.log("tokenis",e),e?(console.log(r().zrc20s),await E(e),console.log(r().zrc20s),g.value=r().zrc20s[e.toLowerCase()],console.log(g.value)):g.value=0,n().stopLoading()}});const[K,A]=oe();return(e,l)=>{const q=ne;return B(),O(q,{modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=s=>h.value=s),"align-center":"",width:"640px","modal-class":"exchange-dialog",class:"exchange-dialog w-[640px] h-[503px] bg-[#191919]"},{header:c(()=>[(B(),Y("svg",{onClick:l[0]||(l[0]=s=>h.value=!1),style:{width:"36px",height:"36px"},xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none"},me))]),default:c(()=>[i(o(K),null,{default:c(({$slots:s})=>[t("button",fe,[ve,t("span",_e,[(B(),O(Q(s.default)))])])]),_:1}),i(o(ce),{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=s=>v.value=s),"active-color":"var(--primary-color)","in-active-color":"#B9BDC3"},{default:c(()=>[i(o(ie),{class:"half-1px-b gap-0 text-[24px] font-Transducer"},{default:c(()=>[i(o(G),{value:"funding",class:"flex-1 text-center grid place-content-center"},{default:c(({active:s})=>[t("span",{class:"py-2.5 border-b-[1px]",style:M({borderBottomColor:s?"var(--primary-color)":"var(--primary-black-color)"})}," Funding ",4)]),_:1}),i(o(G),{value:"settlement",class:"flex-1 text-center grid place-content-center"},{default:c(({active:s})=>[t("span",{class:"py-2.5 border-b-[1px] border-transparent",style:M({borderBottomColor:s?"var(--primary-color)":"var(--primary-black-color)"})}," Settlement ",4)]),_:1})]),_:1}),i(o(re),null,{default:c(()=>[i(o(W),{value:"funding",class:"mt-5 px-5 grid grid-cols-2 gird-rows-4 gap-x-2.5 gap-y-5"},{default:c(()=>[t("div",he,[xe,we,i(ue)]),t("div",be,[ye,i(j,{modelValue:o(a),"onUpdate:modelValue":l[1]||(l[1]=s=>b(a)?a.value=s:null)},null,8,["modelValue"])]),t("div",Te,[Be,t("span",Ce,z(o(u)),1)]),t("div",ke,[I(t("input",{type:"number",class:"w-full bg-transparent outline-none text-base text-[#B9BDC3]","onUpdate:modelValue":l[2]||(l[2]=s=>b(f)?f.value=s:null),placeholder:"Amount"},null,512),[[N,o(f)]])]),t("div",Le,[i(o(A),{onClick:U},{default:c(()=>[H(" Allocate For Trading")]),_:1})])]),_:1}),i(o(W),{value:"settlement",class:"mt-5 px-5 grid grid-cols-2 gird-rows-4 gap-x-2.5 gap-y-5"},{default:c(()=>[t("div",Ae,[De,Ee,i(pe)]),t("div",Ve,[Se,i(j,{modelValue:o(a),"onUpdate:modelValue":l[3]||(l[3]=s=>b(a)?a.value=s:null)},null,8,["modelValue"])]),t("div",Oe,[Me,t("span",ze,z(g.value),1)]),t("div",Ie,[I(t("input",{type:"number",class:"w-full bg-transparent outline-none text-base text-[#B9BDC3]","onUpdate:modelValue":l[4]||(l[4]=s=>b(p)?p.value=s:null),placeholder:"Amount"},null,512),[[N,o(p)]])]),t("div",Ne,[i(o(A),{onClick:R},{default:c(()=>[H("Settle Balance")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}});export{Pe as _};
